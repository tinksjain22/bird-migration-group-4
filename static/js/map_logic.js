// Creating the map object
var myMap = L.map("map", {
    center: [27.3846664428711, 22.478668212891],
    zoom: 3
  });
  
// Adding tile for mapbox
  // Adding the tile layer
  L.tileLayer('https://api.mapbox.com/styles/v1/mapbox.world-bright/tiles/{z}/{x}/{y}', {
    attribution: '&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a>'
}).addTo(myMap);

  // Adding the tile layer for open street map
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://labs.mapbox.com/contribute/">Improve this map</a>'
  }).addTo(myMap);

var multi_points = [
  [[28.15783, 58.213], [27.61833, 53.87117], [27.684, 53.20533], [27.76517, 52.55517], [27.31, 52.30767], [27.30983, 52.30767], [27.34233, 52.18367], [27.38517, 52.2735], [27.38483, 52.27367], [27.31, 52.30767], [27.3365, 52.18283], [27.3365, 52.18283], [27.3365, 52.18283], [27.31883, 52.27], [27.3445, 52.183], [27.3585, 52.2415], [27.385, 52.27333], [27.303, 52.298], [27.31017, 52.30883], [27.31017, 52.3075], [27.303, 52.29783], [27.3455, 52.2425], [26.51167, 46.75017], [26.57217, 46.299], [26.51683, 45.85883], [26.54283, 45.27317], [26.61783, 45.15], [26.61717, 45.14983], [26.571, 44.84833], [26.54267, 44.3125], [26.44533, 43.4005], [26.41017, 42.513], [26.213, 41.88867], [26.2315, 41.844], [26.23133, 41.844], [26.37833, 41.57833], [26.667, 40.86517], [26.94567, 40.27917], [26.71867, 39.21267], [26.57767, 37.978], [25.559, 34.67467], [25.47783, 33.74117], [25.55117, 32.73633], [25.59367, 31.78533], [25.3405, 31.1035], [25.011, 30.18183], [24.47367, 29.484], [24.4655, 29.49767], [24.4655, 29.49767], [24.48717, 29.33517], [24.53867, 28.73533], [24.48633, 27.926], [24.32433, 26.92533], [24.1725, 26.037], [23.89833, 25.46517], [23.89833, 25.46517], [23.81433, 25.326], [23.76367, 24.68567], [23.29, 23.996], [22.94467, 23.2235], [22.66317, 22.40117], [22.56567, 21.9895], [22.56783, 21.988], [23.0145, 21.70333], [23.43833, 20.98967], [23.38217, 20.28233], [23.09967, 19.56333], [22.85383, 18.887], [22.85483, 18.88883], [22.85417, 18.89067], [22.84783, 18.633], [22.78733, 18.019], [22.13567, 16.3955], [21.901, 15.69833], [21.91783, 15.588], [21.91767, 15.588], [22.004, 15.381], [22.124, 14.84517], [21.83367, 14.47883], [21.498, 14.13867], [21.40867, 13.872], [21.40883, 13.87133], [21.40867, 13.87133], [21.40783, 13.56067], [21.44633, 13.38067], [21.31233, 13.2395], [21.25133, 13.21883], [21.252, 13.21917], [21.252, 13.21917], [21.25183, 13.219], [21.25517, 13.0945], [21.39083, 12.68883], [21.35183, 12.2495], [21.21517, 11.85667], [21.163, 11.46217], [21.16333, 11.4075], [21.171, 11.39683], [21.25033, 11.17317], [21.25533, 10.7805], [21.12967, 10.322], [20.89783, 10.08017], [20.66033, 9.80483], [20.8145, 9.0695], [20.77617, 8.81433], [20.50383, 8.7285], [20.46667, 8.49433], [20.47417, 8.50033], [20.471, 8.49667], [20.34517, 8.40567], [20.24667, 8.10183], [20.00583, 7.82], [20.06467, 7.35083], [20.05883, 7.158], [20.0485, 7.15883], [20.0485, 7.15883], [19.98567, 7.13683], [19.8455, 6.87067], [19.96567, 6.51167], [20.31483, 4.57467], [20.30333, 4.54967], [20.20183, 4.47133], [20.15617, 4.1705], [20.28633, 3.78], [20.2055, 3.52017], [20.19067, 3.54517], [20.19067, 3.54517], [20.18017, 3.5335], [20.09733, 3.42617], [20.28617, 3.13633], [20.1065, 2.81767], [19.75533, 2.5975], [19.659, 2.5105], [19.65883, 2.51067], [19.65883, 2.51083], [19.61833, 2.27117], [19.6825, 1.8625], [19.54017, 2.00483], [19.22617, 1.71267], [19.23783, 1.7125], [19.21417, 1.7125], [19.21467, 1.68733], [19.2285, 1.6525], [19.22817, 1.43483], [19.25067, 1.13433], [19.132, 0.857], [19.0165, 0.76333], [19.00417, 0.7565], [19.0045, 0.75667], [18.033, -0.39367], [17.75833, -0.60383], [17.64267, -0.6995], [17.6235, -0.69717], [17.54033, -0.81667], [17.45583, -0.88183], [17.448, -0.92767], [17.4045, -0.92883]],
  [[27.86717, 58.8595], [27.92633, 58.26333], [28.10867, 57.63217], [27.61433, 56.821], [26.92067, 56.20883], [26.2075, 55.83867], [26.2075, 55.83883], [26.32567, 55.73433], [26.348, 55.73217], [26.35917, 55.53833], [27.31, 52.3075], [27.31017, 52.30783], [27.3565, 52.30733], [27.30967, 52.30783], [27.378, 52.298], [27.31, 52.3075], [27.31, 52.30783], [27.47283, 52.254], [27.39517, 52.30533], [27.31, 52.30783], [27.511, 52.24333], [27.38483, 52.27333], [27.37783, 52.298], [27.385, 52.2735], [27.385, 52.27317], [27.30983, 52.30767], [27.34167, 52.19833], [27.40733, 52.09417], [27.4995, 51.38383], [27.70067, 50.64317], [27.68767, 49.86217], [27.75683, 49.4015], [27.75167, 49.31433], [27.86483, 48.75017], [28.01833, 47.93567], [28.5465, 47.2215], [28.8525, 46.564], [29.0365, 46.10583], [28.992, 45.93033], [28.99733, 45.88267], [28.9175, 45.34717], [28.56583, 44.59667], [27.42283, 42.59867], [27.41983, 42.59717], [27.28817, 42.33217], [26.8855, 39.41017], [26.9855, 39.01483], [26.97283, 38.97183], [27.14983, 38.65167], [27.2425, 38.0995], [27.57133, 37.50267], [27.78983, 36.76883], [28.1335, 36.29967], [28.13333, 36.29983], [28.128, 36.29017], [28.15933, 35.7245], [28.26633, 35.0245], [28.19967, 34.3465], [28.168, 33.669], [28.16483, 32.97467], [27.58067, 31.1325], [27.59433, 31.1075], [27.60017, 31.08667], [27.89933, 30.81767], [27.90133, 30.147], [27.59733, 29.5085], [26.25667, 25.3195], [26.24283, 25.2155], [26.20067, 24.70683], [25.88433, 23.85517], [25.39083, 22.96383], [24.96267, 22.08533], [24.8695, 21.81833], [24.87, 21.81817], [24.90433, 21.66567], [24.99567, 21.02667], [24.91167, 20.20867], [24.5255, 19.37717], [24.16533, 18.6085], [24.0265, 18.31817], [24.03483, 18.31883], [23.57317, 17.71367], [23.31733, 16.948], [22.64083, 16.00583], [21.91083, 15.143], [21.40167, 14.4165], [21.3815, 14.18383], [21.38417, 13.992], [21.48417, 13.5795], [21.447, 13.03583], [21.26617, 12.8195], [20.89733, 12.601], [20.867, 12.57733], [20.85, 12.5335], [20.80333, 12.33233], [20.74917, 12.069], [20.67933, 11.62867], [20.49, 11.153], [20.29967, 10.85017], [20.30317, 10.72417], [20.30333, 10.72633], [20.28267, 10.60167], [20.343, 10.12833], [20.144, 9.56183], [20.04667, 9.538], [20.03417, 9.236], [20.03417, 9.23583], [20.03283, 9.23283], [20.05283, 9.01017], [20.06917, 8.63233], [20.00033, 8.1785], [19.80633, 7.7155], [19.6695, 7.3715], [19.65967, 7.34783], [19.65683, 7.33733], [19.66967, 7.22517], [20.03217, 5.67533], [20.1005, 5.22367], [19.82733, 4.91733], [19.491, 4.58267], [19.29267, 4.24233], [19.29483, 4.2445], [19.287, 4.2345], [19.28167, 3.94283], [19.26217, 3.61667], [19.26283, 3.616], [19.26217, 3.61567], [19.26233, 3.6155], [19.26233, 3.61533], [19.26217, 3.6155], [19.258, 3.5575], [19.04583, 3.14783], [18.69717, 2.822], [18.48933, 2.5245], [18.295, 2.20283], [18.29367, 2.2025], [18.29267, 2.2015], [18.36917, 2.12033], [18.58717, 1.73167], [18.54067, 1.68717], [18.529, 1.71717], [18.48833, 1.67667], [18.48917, 1.677], [18.488, 1.676], [18.465, 1.63667], [18.48433, 1.1855], [18.449, 1.00817], [18.22417, 0.97083], [18.2085, 0.959], [18.221, 0.95317], [18.22117, 0.95317], [18.24333, 0.835], [18.09333, 0.74733], [17.98967, 0.39433], [17.93167, 0.13133], [18.04183, -0.1245], [18.03683, -0.1245], [18.04767, -0.12967], [18.02083, -0.14817], [17.92867, -0.35817], [17.70217, -0.70583], [17.47633, -0.91717], [17.5015, -0.90467]]
]

var multi_point_r = [
    [[17.50383, -0.90533], [17.494, -0.90283], [17.66667, -0.65917], [18.09017, -0.09917], [18.4975, 0.34417], [18.576, 0.62067], [18.57533, 0.61967], [18.57533, 0.6195], [18.53517, 0.7445], [18.7865, 1.33683], [19.08967, 2.07667], [19.67183, 2.78217], [19.959, 3.5385], [19.999, 3.66133], [20.2045, 4.18733], [20.6575, 4.87717], [21.04183, 5.8065], [21.07333, 6.25617], [21.07483, 6.26483], [21.0735, 6.26633], [21.13583, 6.63767], [21.33183, 7.56133], [21.75883, 8.34717], [21.785, 9.23983], [21.9875, 9.9715], [22.088, 10.18133], [22.088, 10.18133], [21.81533, 10.6545], [21.89867, 11.473], [22.32767, 12.14217], [22.66167, 12.9465], [22.94733, 13.10183], [23.03067, 13.10383], [23.035, 13.11167], [23.06917, 13.1235], [23.27017, 13.35217], [23.538, 13.50683], [23.7395, 13.84083], [23.88617, 14.0845], [23.9075, 14.09783], [23.9075, 14.09783], [23.7325, 14.2935], [23.31383, 14.8445], [22.9755, 15.4755], [22.738, 16.1295], [22.51567, 16.68417], [22.413, 17.085], [22.375, 17.106], [22.305, 17.64417], [22.14167, 17.92483], [22.124, 18.76317], [22.27333, 19.673], [22.22517, 20.40583], [22.24633, 20.9755], [22.29067, 21.77183], [22.49833, 22.57683], [23.237, 24.11233], [23.326, 24.19633], [23.614, 24.6975], [26.3795, 40.21283], [26.50667, 40.45433], [26.27467, 40.777], [25.78683, 43.099], [25.78667, 43.09933], [25.79533, 43.10167], [25.92667, 43.858], [25.93817, 43.85917], [26.04667, 44.05217], [26.36917, 44.337], [26.6675, 44.78], [26.70283, 44.836], [27.17183, 45.22217], [27.18267, 45.21917], [27.176, 45.2225], [27.182, 45.2195], [27.17583, 45.23433], [27.31867, 45.51717], [27.66217, 45.862], [28.022, 46.452], [27.8515, 47.22133], [27.78133, 47.282], [27.7815, 47.282], [27.4005, 47.3935], [27.40033, 47.3935], [27.40017, 47.39333], [27.40033, 47.3935], [27.332, 47.36017], [27.33933, 47.36783], [27.40017, 47.39367], [27.39717, 47.39], [27.40033, 47.39367], [27.40033, 47.39367], [27.32017, 48.0035], [27.39017, 48.74333], [27.6, 49.55017], [27.89767, 50.204], [27.93083, 50.24017], [27.929, 50.24067], [27.88533, 51.08417], [27.8815, 51.619], [27.8845, 51.6195], [27.88217, 51.62], [27.87883, 51.61967], [27.86083, 51.94683], [27.79733, 52.54533], [27.88867, 53.42983], [27.566, 54.46183], [26.96167, 55.60433], [26.88983, 55.7495], [26.88933, 55.74983], [26.8995, 55.76467], [26.8765, 55.759], [27.25633, 55.90833], [27.25883, 55.89833], [27.259, 55.89833], [27.25917, 55.89833], [27.25883, 55.89817], [27.25933, 55.906], [27.259, 55.89817], [27.25883, 55.89833], [27.259, 55.89833], [27.259, 55.898], [27.37083, 56.0145], [27.36683, 56.01317], [27.36717, 56.01317], [27.36717, 56.01333], [27.257, 55.897]],
    [[17.45783, -0.91167], [17.53833, -0.83417], [17.71683, -0.45467], [17.81317, -0.06517], [17.8755, 0.162], [17.87917, 0.17667], [17.893, 0.2185], [17.97183, 0.457], [18.07383, 1.19717], [18.19283, 2.0645], [18.44183, 2.9545], [18.61583, 3.366], [18.62333, 3.38783], [18.623, 3.39], [18.69817, 3.59617], [19.01783, 4.6045], [19.43, 5.5965], [19.8365, 6.56817], [20.09417, 7.33], [20.10333, 7.408], [20.10333, 7.408], [20.05533, 7.58683], [20.35617, 8.43517], [20.84717, 9.18167], [21.187, 9.95917], [21.48683, 10.61783], [21.56567, 10.8905], [21.5715, 10.90267], [21.66683, 10.89667], [21.85833, 11.21533], [22.24667, 11.82067], [22.173, 12.41633], [22.36917, 13.02883], [22.39117, 13.0325], [22.39117, 13.0325], [22.39433, 13.0485], [22.50933, 13.38], [22.33983, 14.03033], [22.22567, 14.84983], [22.0075, 15.33617], [21.9945, 15.35567], [21.91017, 15.466], [21.85917, 15.57733], [20.38467, 18.58883], [19.83083, 18.72], [19.81583, 18.74633], [19.811, 18.74833], [19.78117, 18.74017], [19.05317, 18.6705], [18.2155, 18.942], [17.87283, 19.65], [18.0675, 20.225], [18.071, 20.55167], [17.98083, 20.6795], [18.28367, 20.76167], [18.54267, 21.20167], [18.7085, 21.71167], [18.912, 22.20167], [18.8935, 22.60333], [18.85083, 22.81917], [18.77767, 23.224], [18.5055, 24.02967], [17.94767, 24.73033], [17.365, 25.4935], [16.9565, 26.27267], [16.85217, 26.6485], [17.06083, 28.6165], [17.30433, 29.3855], [17.96067, 30.02583], [18.0015, 30.151], [18.004, 30.15167], [20.62283, 30.4805], [21.44933, 30.9535], [27.37533, 47.393], [27.40017, 47.39333], [27.40033, 47.39333], [27.32817, 47.36067], [27.40033, 47.39333], [27.40017, 47.39333], [27.32867, 47.3595], [27.40017, 47.3935], [27.40033, 47.39333], [27.32783, 47.35983], [27.32867, 47.3595], [27.40033, 47.3935], [26.20583, 50.28167], [26.01767, 50.84517], [26.01117, 50.8445], [26.006, 50.91717], [26.0185, 51.1455], [26.03033, 51.83567], [25.90567, 52.72267], [25.80183, 53.04183], [25.6065, 53.72183], [25.60817, 53.72783], [25.608, 53.72833], [25.75983, 53.94], [25.97533, 54.31767], [25.99083, 54.57283], [26.13733, 55.03], [26.2925, 55.32217], [26.339, 55.36867], [26.34383, 55.37417], [26.46817, 55.49683], [26.74133, 55.8555], [26.84667, 56.35483], [26.78467, 56.8085], [27.16233, 57.22], [27.548, 57.48433], [28.05533, 57.51917], [28.35917, 58.104], [28.17683, 58.68217], [27.805, 59.0855]]
]

var line1 = L.polyline([],{smoothFactor: 1, color: 'red', weight: 4}).addTo(myMap);
var line2 = L.polyline([],{smoothFactor: 1, color: 'green', weight: 4}).addTo(myMap);
var line3 = L.polyline([],{smoothFactor: 1, color: 'orange', weight: 4}).addTo(myMap);
var line4 = L.polyline([],{smoothFactor: 1, color: 'blue', weight: 4}).addTo(myMap);


function redraw2(point1, point2) {
  if(point1){
    line1.addLatLng([point1[1],point1[0]]);
  }
  
  if(point2){
    line2.addLatLng([point2[1],point2[0]]);
  }

}

function redraw2_r(point3, point4) {
  if(point3){
    line3.addLatLng([point3[1],point3[0]]);
  }
  
  if(point4){
    line4.addLatLng([point4[1],point4[0]]);
  }

}

const multi_pointsCopy = [...multi_points];
const multi_point_rCopy = [...multi_point_r];

function update2() {
  if (multi_points[0].length || multi_points[1].length) {
      redraw2(multi_points[0].shift(),multi_points[1].shift());
      setTimeout(update2, 50);
  } else if (multi_point_r[0].length || multi_point_r[1].length) {
    myMap.removeLayer(line1);
    myMap.removeLayer(line2);
        redraw2_r(multi_point_r[0].shift(),multi_point_r[1].shift());
        setTimeout(update2, 50);
    }
    else {
      myMap.removeLayer(line3);
      myMap.removeLayer(line4);
    }  
}

setTimeout(update2, 100);


